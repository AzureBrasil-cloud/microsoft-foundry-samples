# Attach da Vector Store ao Agent

Guia rápido para anexar uma vector store a um agente (agent) para permitir buscas em arquivos associados.

---

## Pré-requisitos
- Agent já criado (veja [5.CREATE_AGENT.md](./5.CREATE_AGENT.md)).
- Vector Store criada (veja [3.VECTOR_STORE_CREATION.MD](./3.VECTOR_STORE_CREATION.MD)).
- `AZURE_PROJECT_URL` e `AZURE_ACCESS_TOKEN` exportados.
- `curl` instalado.

Exemplo:
```bash
export AZURE_PROJECT_URL="https://<seu-recurso>.services.ai.azure.com/api/projects/<nome-do-projeto>"
export AZURE_ACCESS_TOKEN="<seu_access_token>"
```

---
## Anexar vector store ao agente (curl)

Substitua `AGENT_NAME`, `VECTOR_STORE_ID`, `DEPLOYMENT_NAME` e `INSTRUCTIONS` conforme necessário.

```bash
AGENT_NAME="meu-agente-teste"
VECTOR_STORE_ID="vs_123456789"
DEPLOYMENT_NAME="gpt-4.1-mini"
INSTRUCTIONS="You are a helpful assistant that answers questions about associated files only"

curl -s -X POST "${AZURE_PROJECT_URL}/agents/${AGENT_NAME}?api-version=2025-11-15-preview" \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer ${AZURE_ACCESS_TOKEN}" \
  -d "{
    \"definition\": {
      \"kind\": \"prompt\",
      \"model\": \"${DEPLOYMENT_NAME}\",
      \"instructions\": \"${INSTRUCTIONS}\",
      \"tools\": [
        {
          \"type\": \"file_search\",
          \"vector_store_ids\": [ \"${VECTOR_STORE_ID}\" ]
        }
      ]
    }
  }"
```
Resposta
```json
{
  "object": null,
  "id": null,
  "name": null,
  "versions": {
    "latest": {
      "metadata": {},
      "object": null,
      "id": null,
      "name": null,
      "version": null,
      "description": null,
      "created_at": null,
      "definition": {
        "kind": null,
        "model": null,
        "instructions": null,
        "tools": [
          {
            "type": null,
            "vector_store_ids": []
          }
        ]
      }
    }
  }
}

```

